import{r as t,h as o,H as i,g as s}from"./p-80e7f1ae.js";import{Y as r,L as h,B as e}from"./p-466ba6c3.js";const a=class{constructor(o){t(this,o),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this._hide=this._hide.bind(this),this.hideTimeout=new r(200).onTimeout(this._hide)}show(t){this.hideTimeout.clear(),this.host.contains(t.target)||(this.host.setAttribute("visible","true"),this.calcualtePosition(t.target),this.scrollListener=h(()=>{this.calcualtePosition(t.target)}),window.addEventListener("scroll",this.scrollListener))}hide(){this.hideTimeout.clear().start()}_hide(){window.removeEventListener("scroll",this.scrollListener),this.host.removeAttribute("visible")}calcualtePosition(t){const{left:o,top:i,width:s,height:r}=t.getBoundingClientRect(),{left:h,top:a,width:n,height:p}=this.host.getBoundingClientRect(),l=new e(o,i,s,r),c=new e(h,a,n,p);this.top?(this.host.style.left=l.origin.x+l.dimensions.x/2-c.dimensions.x/2+"px",this.host.style.top=l.origin.y-c.dimensions.y-15+"px"):this.left?(this.host.style.left=l.origin.x-c.dimensions.x-15+"px",this.host.style.top=l.origin.y+l.dimensions.y/2-c.dimensions.y/2+"px"):this.bottom?(this.host.style.left=l.origin.x+l.dimensions.x/2-c.dimensions.x/2+"px",this.host.style.top=l.origin.y+l.dimensions.y+15+"px"):this.right?(this.host.style.left=l.origin.x+l.dimensions.x+15+"px",this.host.style.top=l.origin.y+l.dimensions.y/2-c.dimensions.y/2+"px"):(this.host.style.left=l.origin.x+l.dimensions.x/2-c.dimensions.x/2+"px",this.host.style.top=l.origin.y+l.dimensions.y+15+"px")}componentWillLoad(){document.querySelectorAll(this.element).forEach(t=>{this.host.addEventListener("mouseover",this.show),this.host.addEventListener("touchstart",this.show),this.host.addEventListener("mouseout",this.hide),this.host.addEventListener("touchend",this.hide),t.addEventListener("mouseover",this.show),t.addEventListener("touchstart",this.show),t.addEventListener("mouseout",this.hide),t.addEventListener("touchend",this.hide)})}disconnectedCallback(){this.hideTimeout.clear(),document.querySelectorAll(this.element).forEach(t=>{this.host.removeEventListener("mouseover",this.show),this.host.removeEventListener("touchstart",this.show),this.host.removeEventListener("mouseout",this.hide),this.host.removeEventListener("touchend",this.hide),t.removeEventListener("mouseover",this.show),t.removeEventListener("touchstart",this.show),t.removeEventListener("mouseout",this.hide),t.removeEventListener("touchend",this.hide)})}render(){return o(i,null,o("div",{class:"arrow"}),o("div",{class:"content"},o("slot",null)))}get host(){return s(this)}};a.style=":host{position:fixed;display:none;opacity:0;z-index:2;background-color:#fff;border:solid 1px #ccc}:host([visible]){display:block;opacity:1;transition:opacity 0.4s}:host .arrow{position:absolute;width:var(--ku4-tooltip-arrow-size, 14px);height:var(--ku4-tooltip-arrow-size, 14px);background-color:inherit;transform:rotate(45deg);border:inherit}:host .content{position:relative}:host([top]) .arrow{top:calc(100% - var(--ku4-tooltip-arrow-offset, 7px));left:calc(50% - var(--ku4-tooltip-arrow-offset, 7px));border-top:none !important;border-left:none !important}:host([left]) .arrow{top:calc(50% - var(--ku4-tooltip-arrow-offset, 7px));left:calc(100% - var(--ku4-tooltip-arrow-offset, 7px));border-left:none !important;border-bottom:none !important}:host([bottom]) .arrow{left:calc(50% - var(--ku4-tooltip-arrow-offset, 7px));bottom:calc(100% - var(--ku4-tooltip-arrow-offset, 7px));border-bottom:none !important;border-right:none !important}:host([right]) .arrow{top:calc(50% - var(--ku4-tooltip-arrow-offset, 7px));right:calc(100% - var(--ku4-tooltip-arrow-offset, 7px));border-top:none !important;border-right:none !important}";export{a as ku4_tooltip}