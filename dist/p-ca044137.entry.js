import{r as t,h as o,H as i,g as s}from"./p-80e7f1ae.js";import{Y as h,L as e,B as r}from"./p-466ba6c3.js";const n=class{constructor(o){t(this,o),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this._hide=this._hide.bind(this),this.hideTimeout=new h(200).onTimeout(this._hide)}async show(t){this.hideTimeout.clear(),this.host.contains(t.target)||(this.host.setAttribute("visible","true"),this.calcualtePosition(t.target),this.scrollListener=e(()=>{this.calcualtePosition(t.target)}),window.addEventListener("scroll",this.scrollListener))}async hide(){this.hideTimeout.clear().start()}_hide(){window.removeEventListener("scroll",this.scrollListener),this.host.removeAttribute("visible")}calcualtePosition(t){const{left:o,top:i,width:s,height:h}=t.getBoundingClientRect(),{left:e,top:n,width:c,height:a}=this.host.getBoundingClientRect(),p=new r(o,i,s,h),l=new r(e,n,c,a);this.top?(this.host.style.left=p.origin.x+p.dimensions.x/2-l.dimensions.x/2+"px",this.host.style.top=p.origin.y-l.dimensions.y-15+"px"):this.left?(this.host.style.left=p.origin.x-l.dimensions.x-15+"px",this.host.style.top=p.origin.y+p.dimensions.y/2-l.dimensions.y/2+"px"):this.bottom?(this.host.style.left=p.origin.x+p.dimensions.x/2-l.dimensions.x/2+"px",this.host.style.top=p.origin.y+p.dimensions.y+15+"px"):this.right?(this.host.style.left=p.origin.x+p.dimensions.x+15+"px",this.host.style.top=p.origin.y+p.dimensions.y/2-l.dimensions.y/2+"px"):(this.host.style.left=p.origin.x+p.dimensions.x/2-l.dimensions.x/2+"px",this.host.style.top=p.origin.y+p.dimensions.y+15+"px")}componentWillLoad(){document.querySelectorAll(this.element).forEach(t=>{this.host.addEventListener("mouseover",this.show),this.host.addEventListener("touchstart",this.show),this.host.addEventListener("mouseout",this.hide),this.host.addEventListener("touchend",this.hide),t.addEventListener("mouseover",this.show),t.addEventListener("touchstart",this.show),t.addEventListener("mouseout",this.hide),t.addEventListener("touchend",this.hide)})}disconnectedCallback(){this.hideTimeout.clear(),document.querySelectorAll(this.element).forEach(t=>{this.host.removeEventListener("mouseover",this.show),this.host.removeEventListener("touchstart",this.show),this.host.removeEventListener("mouseout",this.hide),this.host.removeEventListener("touchend",this.hide),t.removeEventListener("mouseover",this.show),t.removeEventListener("touchstart",this.show),t.removeEventListener("mouseout",this.hide),t.removeEventListener("touchend",this.hide)})}render(){return o(i,null,o("div",{class:"arrow"}),o("div",{class:"content"},o("slot",null)))}get host(){return s(this)}};n.style=":host{position:fixed;display:none;opacity:0;z-index:2;background-color:#fff;border:solid 1px #ccc}:host([visible]){display:block;opacity:1;transition:opacity 0.4s}:host .arrow{position:absolute;width:14px;height:14px;background-color:inherit;transform:rotate(45deg);border:inherit}:host .content{position:relative}:host([top]) .arrow{top:calc(100% - 7px);left:calc(50% - 7px);border-top:none !important;border-left:none !important}:host([left]) .arrow{top:calc(50% - 7px);left:calc(100% - 7px);border-left:none !important;border-bottom:none !important}:host([bottom]) .arrow{left:calc(50% - 7px);bottom:calc(100% - 7px);border-bottom:none !important;border-right:none !important}:host([right]) .arrow{top:calc(50% - 7px);right:calc(100% - 7px);border-top:none !important;border-right:none !important}";export{n as ku4_tooltip}