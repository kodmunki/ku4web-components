var __awaiter=this&&this.__awaiter||function(a,t,n,o){function r(a){return a instanceof n?a:new n((function(t){t(a)}))}return new(n||(n=Promise))((function(n,i){function e(a){try{m(o.next(a))}catch(t){i(t)}}function s(a){try{m(o["throw"](a))}catch(t){i(t)}}function m(a){a.done?n(a.value):r(a.value).then(e,s)}m((o=o.apply(a,t||[])).next())}))};var __generator=this&&this.__generator||function(a,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,r,i,e;return e={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(e[Symbol.iterator]=function(){return this}),e;function s(a){return function(t){return m([a,t])}}function m(e){if(o)throw new TypeError("Generator is already executing.");while(n)try{if(o=1,r&&(i=e[0]&2?r["return"]:e[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,e[1])).done)return i;if(r=0,i)e=[e[0]&2,i.value];switch(e[0]){case 0:case 1:i=e;break;case 4:n.label++;return{value:e[1],done:false};case 5:n.label++;r=e[1];e=[0];continue;case 7:e=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){n=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){n.label=e[1];break}if(e[0]===6&&n.label<i[1]){n.label=i[1];i=e;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(e);break}if(i[2])n.ops.pop();n.trys.pop();continue}e=t.call(a,n)}catch(s){e=[6,s];r=0}finally{o=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:true}}};import{r as registerInstance,e as createEvent,h,c as Host,g as getElement}from"./index-dc6f4989.js";import{t}from"./index-aa88697c.js";import{r,l}from"./index-ffdafbbd.js";var ku4ModalCss="@-webkit-keyframes ku4-modal-content-enter{0%{-webkit-transform:var(--ku4-modal-content-animation-start-transform, scale(0.5));transform:var(--ku4-modal-content-animation-start-transform, scale(0.5));opacity:var(--ku4-modal-content-animation-start-opacity, 0)}50%{-webkit-transform:var(--ku4-modal-content-animation-mid-transform, scale(1.2));transform:var(--ku4-modal-content-animation-mid-transform, scale(1.2));opacity:var(--ku4-modal-content-animation-mid-opacity, 0.8)}100%{-webkit-transform:var(--ku4-modal-content-animation-end-transform, scale(1));transform:var(--ku4-modal-content-animation-end-transform, scale(1));opacity:var(--ku4-modal-content-animation-end-opacity, 1)}}@keyframes ku4-modal-content-enter{0%{-webkit-transform:var(--ku4-modal-content-animation-start-transform, scale(0.5));transform:var(--ku4-modal-content-animation-start-transform, scale(0.5));opacity:var(--ku4-modal-content-animation-start-opacity, 0)}50%{-webkit-transform:var(--ku4-modal-content-animation-mid-transform, scale(1.2));transform:var(--ku4-modal-content-animation-mid-transform, scale(1.2));opacity:var(--ku4-modal-content-animation-mid-opacity, 0.8)}100%{-webkit-transform:var(--ku4-modal-content-animation-end-transform, scale(1));transform:var(--ku4-modal-content-animation-end-transform, scale(1));opacity:var(--ku4-modal-content-animation-end-opacity, 1)}}@-webkit-keyframes ku4-modal-overlay-enter{0%{-webkit-transform:var(--ku4-modal-overlay-animation-start-transform, none);transform:var(--ku4-modal-overlay-animation-start-transform, none);opacity:var(--ku4-modal-overlay-animation-start-opacity, 0)}50%{-webkit-transform:var(--ku4-modal-overlay-animation-mid-transform, none);transform:var(--ku4-modal-overlay-animation-mid-transform, none);opacity:var(--ku4-modal-overlay-animation-mid-opacity, 0.35)}100%{-webkit-transform:var(--ku4-modal-overlay-animation-end-transform, none);transform:var(--ku4-modal-overlay-animation-end-transform, none);opacity:var(--ku4-modal-overlay-animation-end-opacity, 0.4)}}@keyframes ku4-modal-overlay-enter{0%{-webkit-transform:var(--ku4-modal-overlay-animation-start-transform, none);transform:var(--ku4-modal-overlay-animation-start-transform, none);opacity:var(--ku4-modal-overlay-animation-start-opacity, 0)}50%{-webkit-transform:var(--ku4-modal-overlay-animation-mid-transform, none);transform:var(--ku4-modal-overlay-animation-mid-transform, none);opacity:var(--ku4-modal-overlay-animation-mid-opacity, 0.35)}100%{-webkit-transform:var(--ku4-modal-overlay-animation-end-transform, none);transform:var(--ku4-modal-overlay-animation-end-transform, none);opacity:var(--ku4-modal-overlay-animation-end-opacity, 0.4)}}:host{position:fixed;display:none;top:0;left:0;width:100vw;height:100vh;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;background:transparent;overflow:auto;-webkit-transform-style:var(--ku4-modal-transform-style, initial);transform-style:var(--ku4-modal-transform-style, initial)}.ku4-modal-content{position:relative;top:0;left:0}.ku4-modal-overlay{position:fixed;display:-ms-flexbox;display:flex;top:0;left:0;width:100%;height:100%;opacity:0;background:var(--ku4-modal-overlay-background, #000)}:host([visible]){display:-ms-flexbox;display:flex;z-index:var(--ku4-modal-z-index, 5)}:host([visible]) .ku4-modal-content{-webkit-animation-name:ku4-modal-content-enter;animation-name:ku4-modal-content-enter;-webkit-animation-duration:var(--ku4-modal-content-animation-duration, 0.4s);animation-duration:var(--ku4-modal-content-animation-duration, 0.4s);-webkit-animation-timing-function:var(--ku4-modal-content-animation-timing-function, ease);animation-timing-function:var(--ku4-modal-content-animation-timing-function, ease);-webkit-transform:var(--ku4-modal-content-transform, none);transform:var(--ku4-modal-content-transform, none);opacity:var(--ku4-modal-content-opacity, 1);z-index:calc(var(--ku4-modal-z-index, 5) + 1)}:host([visible]) .ku4-modal-overlay{-webkit-animation-name:ku4-modal-overlay-enter;animation-name:ku4-modal-overlay-enter;-webkit-animation-duration:var(--ku4-modal-overlay-animation-duration, 0.4s);animation-duration:var(--ku4-modal-overlay-animation-duration, 0.4s);-webkit-animation-timing-function:var(--ku4-modal-overlay-animation-timing-function, ease);animation-timing-function:var(--ku4-modal-overlay-animation-timing-function, ease);-webkit-transform:var(--ku4-modal-overlay-transform, none);transform:var(--ku4-modal-overlay-transform, none);opacity:var(--ku4-modal-overlay-opacity, 0.4);z-index:calc(var(--ku4-modal-z-index, 5))}:host([visible=false]){display:none}";var Ku4Modal=function(){function a(a){registerInstance(this,a);this.displayed=createEvent(this,"ku4ModalDisplay",7);this.dismissed=createEvent(this,"ku4ModalDismiss",7);this.visible=false}a.prototype.handleVisibility=function(a){if(a){r.preventScroll();if(t.exists(this.trap)){this.trap.activate()}}else{r.resumeScroll();if(t.exists(this.trap)){this.trap.deactivate()}}};a.prototype.handleKeyUp=function(a){if(this.visible&&l.esc.didFire(a)){this.dismiss()}};a.prototype.display=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(a){this.visible=true;this.displayed.emit(this);return[2]}))}))};a.prototype.dismiss=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(a){this.visible=false;this.dismissed.emit(this);return[2]}))}))};a.prototype.componentDidLoad=function(){try{this.trap=this.host.querySelector("ku4-focus-trap")||document.querySelector(this.focusTrap)}catch(a){throw new Error("Cannot connect ku4-focus-trap: "+a.messsage)}};a.prototype.render=function(){var a=this;return h(Host,{"aria-modal":"true"},h("section",{class:"ku4-modal-content"},h("slot",null)),h("section",{class:"ku4-modal-overlay",onClick:function(){return a.dismiss()},"aria-hidden":"true"}))};Object.defineProperty(a.prototype,"host",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(a,"watchers",{get:function(){return{visible:["handleVisibility"]}},enumerable:false,configurable:true});return a}();Ku4Modal.style=ku4ModalCss;export{Ku4Modal as ku4_modal};