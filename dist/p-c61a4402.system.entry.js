var __spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,r++)i[r]=s[a];return i};System.register(["./p-ea4f0c53.system.js","./p-d74a6f64.system.js"],(function(t){"use strict";var e,n,i,r,s;return{setters:[function(t){e=t.r,n=t.h},function(t){i=t.a,r=t.k,s=t.t}],execute:function(){t("ku4_mask",function(){function t(t){e(this,t),this.charIndexes=[],this.reverseCharIndexes=[],this.previousValue="",this.currentValue="",this.touchStart=!1,this.template="",this.ban="",this.pattern="",this.char="_",this.hidden=!1,this.handleFocus=this.handleFocus.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleInput=this.handleInput.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.init()}t.prototype.init=function(){var t=this;this.chars=this.char&&new RegExp(this.char),this.banned=this.ban&&new RegExp(this.ban);var e=this.pattern.replace(/[\s\n]/gm,"");return this.patterns=e.substr(1).split(e[0]).map((function(t){try{return t&&new RegExp(t)||null}catch(t){}})),this.charIndexes=this.template.split("").reduce((function(e,n,i){return t.chars.test(n)&&e.push(i),e}),[]),this.reverseCharIndexes=__spreadArrays(this.charIndexes).reverse(),this};t.prototype.templateHandler=function(t,e){var n=this,r=n.input,s=n.previousCharIndex,a=n.previousValue,u=n.currentValue,h=n.value,o=n.char,l=i.unmask(a,e,o).length<i.unmask(u,e,o).length?s+1:s;this.init().value=i.mask(i.unmask(h,e,o),t,o),r.setSelectionRange(l,l)};t.prototype.charHandler=function(t,e){var n=this,r=n.value,s=n.template;this.init().value=i.mask(i.unmask(r,s,e),s,t)};Object.defineProperty(t.prototype,"previousCharIndex",{get:function(){var t=this;return this.reverseCharIndexes.find((function(e){return t.selectionStart>e}))||this.charIndexes[0]},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.currentValue},set:function(t){var e=this,n=e.chars,i=e.hidden,r=e.input,s=t.search(n);this.currentValue=t,r.value=i&&s>-1?t.substring(0,s):t},enumerable:false,configurable:true});t.prototype.handleTouchStart=function(){this.touchStart=!0};t.prototype.handleFocus=function(){var t=this;if(window.document.documentMode)return;var e=this,n=e.input,s=e.template,a=e.char,u=e.chars,h=e.touchStart;this.value=i.mask(i.unmask(this.value,s,a),s,a),r(0).then((function(){var e=n.value.search(u),i=e<0?n.value.length:e;t.input.setSelectionRange(e<0&&!h?0:i,i),t.touchStart=!1}))};t.prototype.handleKeyDown=function(t){if(window.document.documentMode)return;var e=this,n=e.banned,r=e.hidden,s=e.template,a=e.char;t.key&&1===t.key.length&&n&&n.test(t.key)&&!(t.altKey||t.ctrlKey||t.metaKey)&&t.preventDefault(),this.previousValue=r?i.mask(i.unmask(t.target.value,s,a),s,a):t.target.value,this.selectionStart=t.target.selectionStart,this.selectionEnd=t.target.selectionEnd};t.prototype.handleInput=function(t){var e=this;if(window.document.documentMode)return;var n=this,r=n.input,a=n.template,u=n.char,h=n.chars,o=n.previousValue,l=n.banned,c=n.selectionStart,d=n.selectionEnd,p=n.previousCharIndex,f=n.patterns,v=n.charIndexes,g=n.reverseCharIndexes;if(h.test(this.previousValue)||"insertFromPaste"===t.inputType||"deleteContentBackward"===t.inputType||"deleteContentForward"===t.inputType||c!==d){if("insertFromPaste"===t.inputType)try{return navigator.clipboard.readText().then((function(t){var n=t.replace(new RegExp(l,"g"),"");if(s.isNullOrEmpty(n))return e.value=o,void r.setSelectionRange(c,c);if(!l||!l.test(n)){var p=o;if(c<d){var f=g.find((function(t){return t<=c-1})),m=g.find((function(t){return t<=d-1})),y=v.findIndex((function(t){return t===f})),b=v.findIndex((function(t){return t===m})),k=i.unmask(o,a,u),x=k.substring(0,y+1)+k.substring(b+1,o.length);p=i.mask(x,a,u)}var S=v.find((function(t){return t>=c})),I=v.findIndex((function(t){return t===S})),w=i.unmask(p,a,u);p=w.substring(0,I)+n+w.substring(I,o.length),e.value=i.mask(p,a,u);var E=v[I+n.length]||e.value.search(h)||e.value.length;r.setSelectionRange(E,E)}})),this.value=o,void r.setSelectionRange(c,c)}catch(t){return this.value=o,void r.setSelectionRange(c,c)}if("deleteContentBackward"!==t.inputType){if("deleteContentForward"===t.inputType){var m=v.find((function(t){return t>=c})),y=v.findIndex((function(t){return t===m})),b=i.unmask(o,a,u),k=b.substring(0,y)+b.substring(y+1,o.length);return this.value=i.mask(k,a,u),void r.setSelectionRange(c,c)}if(!(t.altKey||t.ctrlKey||t.metaKey)){if(!t.data)return this.value=o,void r.setSelectionRange(c,c);if(h.test(o.charAt(c))||c===a.length){var x=i.unmask(o,a,u);this.value=i.mask(x+t.data,a,u);var S=this.value.search(h),I=S<0?a.length:S;r.setSelectionRange(I,I);var w=v.findIndex((function(t){return t>=I})),E=w<0?v.length-1:w-1;this.validate(t.data,f[E])}else{var R=o;if(c<d){var C=g.find((function(t){return t<=c-1})),T=g.find((function(t){return t<=d-1})),K=v.findIndex((function(t){return t===C})),L=v.findIndex((function(t){return t===T})),V=i.unmask(o,a,u),F=V.substring(0,K+1)+V.substring(L+1,o.length);R=i.mask(F,a,u)}var _=v.find((function(t){return t>=c})),D=v.findIndex((function(t){return t===_})),j=i.unmask(R,a,u);R=j.substring(0,D)+t.data+j.substring(D,o.length);var A=v.find((function(t){return t>_}));this.value=i.mask(R,a,u),r.setSelectionRange(A,A);var P=v.findIndex((function(t){return t>=A})),H=P<0?v.length-1:P-1;this.validate(t.data,f[H])}}}else{var O=g.find((function(t){return t<=c-1})),B=g.find((function(t){return t<=d-1})),M=v.findIndex((function(t){return t===O})),N=v.findIndex((function(t){return t===B})),W=i.unmask(o,a,u);if(M<N){var q=W.substring(0,M+1)+W.substring(N+1,o.length);this.value=i.mask(q,a,u),q&&M>-1?r.setSelectionRange(p+1,p+1):r.setSelectionRange(p,p)}else{var z=W.substring(0,M)+W.substring(N+1,o.length);this.value=i.mask(z,a,u),r.setSelectionRange(p,p)}}}else this.value=o};t.prototype.validate=function(t,e){var n=this,i=n.previousValue,r=n.input,a=n.value,u=n.selectionStart;s.exists(e)&&!(e.test(t)||/\(\?[!<=]/.test(e.toString())&&e.test(a))&&(this.value=i,r.setSelectionRange(u,u))};t.prototype.componentWillLoad=function(){this.input=document.getElementById(this.for),this.input.addEventListener("focus",this.handleFocus),this.input.addEventListener("keydown",this.handleKeyDown),this.input.addEventListener("input",this.handleInput),this.input.addEventListener("touchstart",this.handleTouchStart)};t.prototype.disconnectedCallback=function(){this.input&&this.input.removeEventListener&&(this.input.removeEventListener("focus",this.handleFocus),this.input.removeEventListener("keydown",this.handleKeyDown),this.input.removeEventListener("input",this.handleInput),this.input.removeEventListener("touchstart",this.handleTouchStart))};t.prototype.render=function(){return n("slot",null)};Object.defineProperty(t,"watchers",{get:function(){return{template:["templateHandler"],char:["charHandler"]}},enumerable:false,configurable:true});return t}()).style=":host{display:none}"}}}));