'use strict';

class t{static isNull(t){return null===t}static isEmpty(e){return t.isString(e)&&""===e||t.isArray(e)&&e.length<1||t.isObjectLiteral(e)&&Object.keys(e).length<1}static isUndefined(t){return void 0===t}static isZero(t){return 0===t}static exists(e){return !(t.isUndefined(e)||t.isNull(e))}static isNullOrEmpty(e){return !t.exists(e)||t.isEmpty(e)}static isArray(t){return Array.isArray(t)}static isBool(t){return "boolean"==typeof t}static isTrue(e){return t.isBool(e)&&!0===e}static isFalse(e){return t.isBool(e)&&!1===e}static isDate(t){return t instanceof Date}static isNumber(t){return ("number"==typeof t||t instanceof Number)&&!isNaN(t)}static isEven(t){return this.isNumber(t)&&!this.isZero(t)&&t%2==0}static isOdd(t){return this.isNumber(t)&&!this.isZero(t)&&!this.isEven(t)}static isString(t){return "string"==typeof t||t instanceof String}static isFunction(t){return t instanceof Function}static isObject(e){return t.exists(e)&&"object"==typeof e&&!(t.isBool(e)||t.isNumber(e)||t.isDate(e)||t.isArray(e)||t.isString(e)||t.isFunction(e))}static isObjectLiteral(e){return t.isObject(e)&&e.constructor==={}.constructor}static isTruthy(e){return !t.isFalsy(e)}static isFalsy(e){return t.isZero(e)||t.isFalse(e)||t.isNullOrEmpty(e)||isNaN(e)}}function u(t,e,r="_"){return t.split("").reduce(((t,e)=>t.replace(new RegExp(r),e)),e)}function o(t,e,r="_"){const s=new RegExp(r);return t.split("").reduce(((t,r,i)=>!s.test(r)&&s.test(e.charAt(i))?t+r:t),"")}var h=t=>t.reduce(((t,e)=>(t.includes(e)||t.push(e),t)),[]);class l{constructor(t){this._list=t,this._head=0;}get isEmpty(){return this.length<1}get index(){return this._head}get length(){return this._list.length}get current(){return this._list[this._head]}get next(){const{length:t}=this;let{_head:e}=this;return this._head=e++<t-1?e:0,this.current}get prev(){const{length:t}=this;let{_head:e}=this;return this._head=--e<0?t-1:e,this.current}get peekNext(){const{_head:t,length:e}=this;return this._list[t+1<e?t+1:0]}get peekPrev(){const{_head:t,length:e}=this;return this._list[t-1<0?e-1:t-1]}}function m(t,e=0){const r=Math.pow(10,-e);return Math.round(parseFloat((t*r).toFixed(Math.abs(e))))/r}class ${constructor(e=0,r=0){if(!t.isNumber(e)||!t.isNumber(r))throw new Error("Coord requires numeric x and y values");this._x=e,this._y=r;}get x(){return this._x}get y(){return this._y}get value(){return {x:this.x,y:this.y}}get half(){return this.divide(new $(2,2))}get abs(){return new $(Math.abs(this.x),Math.abs(this.y))}equals(t){return this.x===t.x&&this.y===t.y}add(t){return new $(this.x+t.x,this.y+t.y)}subtract(t){return new $(this.x-t.x,this.y-t.y)}multiply(t){return new $(this.x*t.x,this.y*t.y)}divide(t){return new $(this.x/t.x,this.y/t.y)}round(t=0){return new $(m(this.x,t),m(this.y,t))}toString(){return `(${this.x},${this.y})`}static canParse(e){return t.isArray(e)?!(isNaN(e[0])||isNaN(e[1])):t.isObjectLiteral(e)&&"x"in e&&"y"in e?!(isNaN(e.x)||isNaN(e.y)):e instanceof $}static parse(e){return t.exists(e)?e instanceof $?e:t.isArray(e)?new $(e[0],e[1]):t.isObjectLiteral(e)&&t.exists(e.x)&&t.exists(e.y)?new $(e.x,e.y):null:null}static tryParse(t){return $.canParse(t)?$.parse(t):null}}class O extends ${constructor(t=0,e=0){super(t,e),this._lengthSquared=Math.pow(t,2)+Math.pow(e,2),this._magnitude=Math.sqrt(this._lengthSquared),this._unitNormalX=0===t&&0===e?0:t/this._magnitude,this._unitNormalY=0===t&&0===e?0:e/this._magnitude;}get magnitude(){return this._magnitude}get isZero(){return 0===this.x&&0===this.y}get normal(){return new O(this._unitNormalX,this._unitNormalY)}get invert(){return new O(-this.x,-this.y)}get norm(){return new O(Math.abs(this.x),Math.abs(this.y))}get perpendicular(){return new O(-this.y,this.x)}equals(t){return t instanceof O&&this.x===t.x&&this.y===t.y}add(t){return t instanceof O?new O(this.x+t.x,this.y+t.y):null}dot(t){return t instanceof O?this.x*t.x+this.y*t.y:null}perpendicularAtTo(t){if(!(t instanceof O))return null;const e=t.add(this.projectionOfOnto(t).invert);return new O(e.x,e.y)}projectionOfOnto(t){if(!(t instanceof O))return null;const e=t.normal.scale(this.dot(t.normal));return new O(e.x,e.y)}scale(t){return new O(this.x*t,this.y*t)}unitNormalDot(t){return t instanceof O?this.normal.x*t.normal.x+this.normal.y*t.normal.y:null}reflect(t){if(!(t instanceof O))return null;if(t.isZero)return this;const e=t.normal;return this.add(e.scale(2*e.dot(this)).invert)}round(t=0){return new O(m(this.x,t),m(this.y,t))}}class M extends ${constructor(t,e){super(t,e);}isAbove(t){return this.y<t.y}isBelow(t){return this.y>t.y}isLeftOf(t){return this.x<t.x}isRightOf(t){return this.x>t.x}distanceFrom(t){return new O(this.x-t.x,this.y-t.y)}distanceTo(t){return this.distanceFrom(t).invert}static canParse(t){return t instanceof M||$.canParse(t)}static parse(t){if(t instanceof M)return t;const e=$.parse(t);return new M(e.x,e.y)}static tryParse(t){return M.canParse(t)?M.parse(t):null}}class B{constructor(t=0,e=0,r=0,s=0){this.origin=new M(t,e),this.dimensions=new $(r,s),this.diagonal=M.parse(this.origin.add(this.dimensions)),this.center=this.diagonal.half;}contains(t){return this.origin.isAbove(t)&&this.origin.isLeftOf(t)&&this.diagonal.isRightOf(t)&&this.diagonal.isBelow(t)}aspectToFit(t){const e=this.dimensions,r=t.dimensions,s=r.x,i=r.y;let n=e.x,a=e.y;return n>a&&0!==n?(a*=s/n,n=s,a>i&&(a=i,n*=a/e.y)):a>i&&(n*=i/a,a=i),new B(this.origin.x,this.origin.y,n,a)}}function E(){return Math.random().toString().substr(2)}var L=(t,e,r=!1)=>{let s;return (...i)=>{const n=r&&!s;clearTimeout(s),s=setTimeout((()=>{s=null,r||t(...i);}),e),n&&t(...i);}};var q=Object.freeze({__proto__:null,pattern:t=>t.toString().replace(/(^\/)|(\/$)/g,"").replace(/\\/g,"\\"),escape:t=>t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),alpha:/^[A-z]+$/,alphaNumeric:/^[A-z0-9]+$/,base64:/^[A-z0-9=]+$/,dataUrl:/^\s*data:([a-z]+\/[a-z0-9+-]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=._~:@/?%\s-]*\s*$/i,email:/^\w+([.\w-]+)?@\w+([.\w-]+)?\.[A-Za-z0-9]{2,}$/,empty:/^$/,numeric:/^-?[0-9]+$/,script:/(<script[A-z0-9\n\s\t\r.={([\])}'",;!&|$/#:<>*?+\u0000-\u0037\u00C2\u00A0\u2122-]*?<\/script>)/,uid:/^\d{14,}$/i,url:/^(https?:\/\/)?[^{}\\:]+\.[A-z0-9]{2,12}(\/[^?\s]+)*\/?(\?([^=?#]+=[^=?#]*(&[^=?#]+=[^=?#]*)*(#.*)?)?)?$/,uuid:/^[{(]?[0-9A-F]{8}[-]?([0-9A-F]{4}[-]?){3}[0-9A-F]{12}[)}]?$/i});class Y{constructor(t){this._milliseconds=t;}get isRunning(){return !!this._timeoutId}onTimeout(t){return this._didTimeout=t,this}start(){return this._timeoutId||(this._timeoutId=setTimeout((()=>{this._didTimeout(),this._timeoutId=null;}),this._milliseconds)),this}clear(){return this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null),this}}var Z=t=>new Promise((e=>setTimeout(e,t)));

exports.B = B;
exports.E = E;
exports.L = L;
exports.Y = Y;
exports.Z = Z;
exports.h = h;
exports.l = l;
exports.o = o;
exports.t = t;
exports.u = u;
