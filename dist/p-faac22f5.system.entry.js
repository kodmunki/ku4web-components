var __spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,u=a.length;s<u;s++,i++)r[i]=a[s];return r};System.register(["./p-c61f1f4e.system.js","./p-053691dc.system.js"],(function(t){"use strict";var e,n,r,i,a,s;return{setters:[function(t){e=t.r;n=t.h},function(t){r=t.o;i=t.u;a=t.Z;s=t.t}],execute:function(){var u=":host{display:none}";var h=t("ku4_mask",function(){function t(t){e(this,t);this.charIndexes=[];this.reverseCharIndexes=[];this.previousValue="";this.currentValue="";this.touchStart=false;this.template="";this.ban="";this.pattern="";this.char="_";this.hidden=false;this.handleFocus=this.handleFocus.bind(this);this.handleKeyDown=this.handleKeyDown.bind(this);this.handleInput=this.handleInput.bind(this);this.handleTouchStart=this.handleTouchStart.bind(this);this.init()}t.prototype.init=function(){var t=this;this.chars=this.char&&new RegExp(this.char);this.banned=this.ban&&new RegExp(this.ban);var e=this.pattern.replace(/[\s\n]/gm,"");this.patterns=e.substr(1).split(e[0]).map((function(t){try{return t&&new RegExp(t)||null}catch(e){}}));this.charIndexes=this.template.split("").reduce((function(e,n,r){if(t.chars.test(n)){e.push(r)}return e}),[]);this.reverseCharIndexes=__spreadArrays(this.charIndexes).reverse();return this};t.prototype.templateHandler=function(t,e){var n=this,a=n.input,s=n.previousCharIndex,u=n.previousValue,h=n.currentValue,o=n.value,l=n.char;var c=r(u,e,l).length;var d=r(h,e,l).length;var v=c<d?s+1:s;this.init().value=i(r(o,e,l),t,l);a.setSelectionRange(v,v)};t.prototype.charHandler=function(t,e){var n=this,a=n.value,s=n.template;this.init().value=i(r(a,s,e),s,t)};Object.defineProperty(t.prototype,"previousCharIndex",{get:function(){var t=this;return this.reverseCharIndexes.find((function(e){return t.selectionStart>e}))||this.charIndexes[0]},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.currentValue},set:function(t){var e=this,n=e.chars,r=e.hidden,i=e.input;var a=t.search(n);this.currentValue=t;i.value=r&&a>-1?t.substring(0,a):t},enumerable:false,configurable:true});t.prototype.handleTouchStart=function(){this.touchStart=true};t.prototype.handleFocus=function(){var t=this;var e=this,n=e.input,s=e.template,u=e.char,h=e.chars,o=e.touchStart;this.value=i(r(this.value,s,u),s,u);a(0).then((function(){var e=n.value.search(h);var r=e<0?n.value.length:e;t.input.setSelectionRange(e<0&&!o?0:r,r);t.touchStart=false}))};t.prototype.handleKeyDown=function(t){var e=this,n=e.banned,a=e.hidden,s=e.template,u=e.char;if(t.key&&t.key.length===1&&n&&(n.test(t.key)&&!(t.altKey||t.ctrlKey||t.metaKey))){t.preventDefault()}this.previousValue=a?i(r(t.target.value,s,u),s,u):t.target.value;this.selectionStart=t.target.selectionStart;this.selectionEnd=t.target.selectionEnd};t.prototype.handleInput=function(t){var e=this;var n=this,a=n.input,u=n.template,h=n.char,o=n.chars,l=n.previousValue,c=n.banned,d=n.selectionStart,v=n.selectionEnd,f=n.previousCharIndex,p=n.patterns,g=n.charIndexes,y=n.reverseCharIndexes;if(!o.test(this.previousValue)&&t.inputType!=="insertFromPaste"&&t.inputType!=="deleteContentBackward"&&t.inputType!=="deleteContentForward"&&d===v){this.value=l;return}if(t.inputType==="insertFromPaste"){try{navigator.clipboard.readText().then((function(t){var n=t.replace(new RegExp(c,"g"),"");if(s.isNullOrEmpty(n)){e.value=l;a.setSelectionRange(d,d);return}if(!c||!c.test(n)){var f=l;if(d<v){var p=y.find((function(t){return t<=d-1}));var b=y.find((function(t){return t<=v-1}));var m=g.findIndex((function(t){return t===p}));var x=g.findIndex((function(t){return t===b}));var S=r(l,u,h);var I=S.substring(0,m+1)+S.substring(x+1,l.length);f=i(I,u,h)}var E=g.find((function(t){return t>=d}));var R=g.findIndex((function(t){return t===E}));var w=r(f,u,h);f=w.substring(0,R)+n+w.substring(R,l.length);e.value=i(f,u,h);var C=g[R+n.length]||e.value.search(o)||e.value.length;a.setSelectionRange(C,C)}}));this.value=l;a.setSelectionRange(d,d);return}catch(t){this.value=l;a.setSelectionRange(d,d);return}}if(t.inputType==="deleteContentBackward"){var b=y.find((function(t){return t<=d-1}));var m=y.find((function(t){return t<=v-1}));var x=g.findIndex((function(t){return t===b}));var S=g.findIndex((function(t){return t===m}));var I=r(l,u,h);if(x<S){var E=I.substring(0,x+1)+I.substring(S+1,l.length);this.value=i(E,u,h);E&&x>-1?a.setSelectionRange(f+1,f+1):a.setSelectionRange(f,f)}else{var E=I.substring(0,x)+I.substring(S+1,l.length);this.value=i(E,u,h);a.setSelectionRange(f,f)}return}if(t.inputType==="deleteContentForward"){var R=g.find((function(t){return t>=d}));var w=g.findIndex((function(t){return t===R}));var I=r(l,u,h);var E=I.substring(0,w)+I.substring(w+1,l.length);this.value=i(E,u,h);a.setSelectionRange(d,d);return}if(t.altKey||t.ctrlKey||t.metaKey){return}if(!t.data){this.value=l;a.setSelectionRange(d,d);return}if(o.test(l.charAt(d))||d===u.length){var I=r(l,u,h);this.value=i(I+t.data,u,h);var C=this.value.search(o);var T=C<0?u.length:C;a.setSelectionRange(T,T);var K=g.findIndex((function(t){return t>=T}));var k=K<0?g.length-1:K-1;this.validate(t.data,p[k])}else{var L=l;if(d<v){var V=y.find((function(t){return t<=d-1}));var F=y.find((function(t){return t<=v-1}));var x=g.findIndex((function(t){return t===V}));var S=g.findIndex((function(t){return t===F}));var _=r(l,u,h);var E=_.substring(0,x+1)+_.substring(S+1,l.length);L=i(E,u,h)}var D=g.find((function(t){return t>=d}));var w=g.findIndex((function(t){return t===D}));var I=r(L,u,h);L=I.substring(0,w)+t.data+I.substring(w,l.length);var j=g.find((function(t){return t>D}));this.value=i(L,u,h);a.setSelectionRange(j,j);var K=g.findIndex((function(t){return t>=j}));var k=K<0?g.length-1:K-1;this.validate(t.data,p[k])}};t.prototype.validate=function(t,e){var n=this,r=n.previousValue,i=n.input,a=n.value,u=n.selectionStart;if(s.exists(e)&&!(e.test(t)||/\(\?[!<=]/.test(e.toString())&&e.test(a))){this.value=r;i.setSelectionRange(u,u)}};t.prototype.componentWillLoad=function(){this.input=document.getElementById(this.for);this.input.addEventListener("focus",this.handleFocus);this.input.addEventListener("keydown",this.handleKeyDown);this.input.addEventListener("input",this.handleInput);this.input.addEventListener("touchstart",this.handleTouchStart)};t.prototype.disconnectedCallback=function(){if(this.input&&this.input.removeEventListener){this.input.removeEventListener("focus",this.handleFocus);this.input.removeEventListener("keydown",this.handleKeyDown);this.input.removeEventListener("input",this.handleInput);this.input.removeEventListener("touchstart",this.handleTouchStart)}};t.prototype.render=function(){return n("slot",null)};Object.defineProperty(t,"watchers",{get:function(){return{template:["templateHandler"],char:["charHandler"]}},enumerable:false,configurable:true});return t}());h.style=u}}}));